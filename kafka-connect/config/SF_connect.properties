# Kafka構成プロパティ
# https://docs.snowflake.com/ja/user-guide/kafka-connector-install#kafka-configuration-properties
# https://docs.snowflake.com/ja/user-guide/kafka-connector-install#using-key-pair-authentication-key-rotation
name="mysql.test_cdc"
connector.class=com.snowflake.kafka.connector.SnowflakeSinkConnector
topics=mysql.test_cdc.customers
# topics.regex # topics.regex と topics の両方を指定することはできません。
snowflake.url.name=https://<account_identifier>.snowflakecomputing.com:443
snowflake.user.name=jane.smith
snowflake.private.key=xyz123 # 鍵をユーザーに紐づける方法は上記のリンクを参照
snowflake.database.name=mydb # TODO 自動生成されるのでは?
snowflake.schema.name=myschema # TODO 自動生成されるのでは?
# header.converter # Avro を使用する場合は、このプロパティを指定する必要があります
tasks.max=1
snowflake.topic2table.map= mysql.test_cdc.customers:customers

# Snowpipe Streaming
# https://docs.snowflake.com/en/user-guide/data-load-snowpipe-streaming-kafka#kafka-configuration-properties
snowflake.role.name= # テーブルに行を挿入するときに使用するアクセス制御ロール
enable.streaming.client.optimization=true # default true
buffer.flush.time=1 # default 10
buffer.count.records=2 # default 10000
buffer.size.bytes=10000000 # 20000000(20MB)
snowflake.streaming.max.client.lag=120 # default 120
snowflake.streaming.enable.single.buffer=true # default true
errors.tolerance=NONE # default NONE
errors.log.enable=FALSE # default FALSE
errors.deadletterqueue.topic.name= # default None

# Converter
# https://docs.snowflake.com/en/user-guide/data-load-snowpipe-streaming-kafka#converters
# Snowflake コンバーターは、Snowpipe Streaming ではサポートされていない
key.converter=org.apache.kafka.connect.storage.StringConverter # これはKafkaコネクタでは使用されませんが、Kafka Connectプラットフォームでは必要です。
value.converter=org.apache.kafka.connect.json.JsonConverter
# value.converter.basic.auth.credentials.source=USER_INFO # Avroを利用していてKafkaスキーマレジストリへの安全なアクセスが必要な場合に使う
# value.converter.basic.auth.user.info=jane.smith:MyStrongPassword # Avroを利用していてKafkaスキーマレジストリへの安全なアクセスが必要な場合に使う

# Schema
# https://docs.snowflake.com/en/user-guide/data-load-snowpipe-streaming-kafka-schema-detection
snowflake.ingestion.method=SNOWPIPE_STREAMING
snowflake.enable.schematization=TRUE # default FALSE
schema.registry.url= # default None Avro および Protobuf にはスキーマ レジストリが必要
